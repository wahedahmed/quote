:root{
  --bg:#f6f7fb; --card:#ffffff; --ink:#0f172a; --muted:#6b7280;
  --line:#e5e7eb; --brand:#0ea5e9; --danger:#ef4444; --radius:16px;
}
*{box-sizing:border-box}
html,body{
  margin:0; padding:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Kufi Arabic","Noto Sans Arabic",Arial,sans-serif;
  background:var(--bg); color:var(--ink)
}

.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 14px; background:#fff; border-bottom:1px solid var(--line);
  position:sticky; top:0; z-index:20
}
.btn{ background:#fff; border:1px solid var(--line); border-radius:10px; padding:8px 12px; cursor:pointer }
.btn:hover{border-color:#cbd5e1}
.btn.primary{background:var(--brand); color:#fff; border-color:var(--brand)}
.btn.ghost{background:transparent; border-color:var(--line); color:var(--muted)}

.paper{
  max-width:900px; margin:22px auto; background:var(--card); border:1px solid var(--line);
  border-radius:var(--radius); padding:22px 18px; box-shadow:0 6px 24px rgba(15,23,42,.04)
}
.hero{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px}
.brand{display:flex; gap:10px; align-items:center}
.brand img{max-height:80px; object-fit:contain}
.title h1{margin:0; font-size:30px}
.title p{margin:4px 0 0; color:var(--muted)}

.meta .mc label{display:block; color:var(--muted); font-size:.9rem; margin-bottom:4px}
.meta .mc input, .meta .mc select{width:100%}

.grid-2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
.grid-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:14px}
@media (max-width:760px){.grid-2,.grid-3{grid-template-columns:1fr}}

input,select{ border:1px solid var(--line); border-radius:10px; padding:10px 12px; font-size:1rem; background:#fff; color:inherit }
input:focus,select:focus{outline:none; border-color:#cbd5e1}

.sec{margin:0 0 8px; font-size:1.05rem}
.card{border:1px solid var(--line); border-radius:14px; padding:14px; margin-top:10px}
.row{display:flex; align-items:center}
.gap{gap:8px}
.flex-1{flex:1}

.bullets{
  margin:0 0 8px; padding:0; list-style:none;
  display:grid; grid-template-columns:1fr 1fr; gap:10px;
}
@media (max-width:700px){ .bullets{ grid-template-columns:1fr; } }
.bullets li{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:10px 12px; border:1px dashed var(--line);
  border-radius:10px; background:#fff;
}
.bullets .txt{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.bullets .del{
  border:1px solid #fecaca; color:#b91c1c; background:#fff;
  border-radius:8px; padding:6px 10px; cursor:pointer; flex:0 0 auto;
}
.bullets .del:hover{ background:#fff1f2; }

.rowline{display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px solid var(--line)}
.rowline:last-child{border-bottom:none}
.rowline.total{padding-top:12px}
.rowline .num{display:flex; align-items:center; gap:8px}
.big{font-size:1.6rem}

.kv{display:grid; grid-template-columns:auto 1fr; gap:8px; align-items:center}
.inline{display:flex; align-items:center; gap:8px}

.tbl{width:100%; border-collapse:collapse; margin-top:10px}
.tbl th,.tbl td{border:1px solid var(--line); padding:10px; text-align:right}
.tbl th{background:#f8fafc}
.num{direction:ltr; text-align:left; font-variant-numeric:tabular-nums; white-space:nowrap}

.sign{margin-top:10px}
.btn.danger{border-color:#fecaca; color:#b91c1c}
.btn.danger:hover{background:#fff1f2}
.subtle{color:var(--muted)}

/* أزرار صغيرة داخل الجدول */
.table-actions{ display:flex; gap:6px; }
.table-actions .mini{
  padding:4px 8px; border-radius:8px; font-size:.9rem; border:1px solid var(--line); background:#fff; cursor:pointer;
}
.table-actions .mini.danger{ border-color:#fecaca; color:#b91c1c }

/* الطباعة */
.print-hide{ /* اختفي في الطباعة فقط */ }
.print-only{ display:none; }

@media print{
  .no-print, .bullets .del, .print-hide { display:none !important; }
  .print-only{ display:block !important; }
  body{background:#fff}
  .paper{box-shadow:none; border-color:#ddd}
  /* لو الخطة دفعة واحدة: اخفِ قسم الدفعات كله */
  body[data-plan="1"] #paymentsSec{ display:none !important; }
}
